
# Техническое задание: Разработка "Мастера регулярных выражений" для RegexVision

## 1. Введение

**RegexVision** — это инструмент для визуального создания, тестирования и анализа регулярных выражений, призванный упростить работу с ними как для новичков, так и для опытных пользователей.

Текущая задача — разработка новой функции **"Мастер регулярных выражений" (Regex Wizard)**. Основная цель Мастера — предоставить пользователям, особенно тем, кто мало знаком или не знаком вовсе с синтаксисом и концепциями регулярных выражений, интуитивно понятный пошаговый инструмент для построения выражений, отталкиваясь от их практических задач и потребностей.

## 2. Цели и задачи Мастера

*   **Снизить порог входа:** Сделать создание регулярных выражений доступным для широкого круга пользователей, независимо от их уровня подготовки.
*   **Интуитивность:** Обеспечить понятный и логичный пользовательский интерфейс, который направляет пользователя через процесс формулирования его задачи.
*   **Покрытие сценариев:** Охватить широкий спектр как типовых, так и более сложных задач, которые обычно решаются с помощью регулярных выражений.
*   **Генерация корректных блоков:** По итогам работы Мастера генерировать конфигурации блоков, совместимые с существующей системой RegexVision, или готовые к использованию фрагменты регулярных выражений.
*   **Обучающий элемент:** Помогать пользователям косвенно изучать принципы работы регулярных выражений через понятные формулировки, примеры и результаты работы Мастера.

## 3. Целевая аудитория

*   **Новички в Regex:** Пользователи, не имеющие опыта или имеющие минимальный опыт работы с регулярными выражениями.
*   **Нерегулярные пользователи Regex:** Разработчики, аналитики и другие специалисты, которым время от времени нужно составить регулярное выражение для конкретной задачи, но они не помнят или не хотят углубляться в синтаксис.
*   **Опытные пользователи (опционально):** Могут использовать Мастер для быстрого создания базовых конструкций или для решения рутинных задач, экономя время.

## 4. Ключевые требования к Мастеру

### 4.1. Логика и структура
*   **Пошаговый интерфейс:** Мастер должен вести пользователя через серию логически связанных шагов (вопросов, выборов, уточнений).
*   **От задачи к решению:** Логика Мастера должна строиться от высокоуровневого описания задачи пользователя к конкретным элементам регулярного выражения.
*   **Ветвление:** В зависимости от ответов пользователя, Мастер должен предлагать различные последующие шаги и опции.
*   **Прогрессивная детализация:** Сложность и специфичность вопросов могут нарастать по мере продвижения пользователя по веткам Мастера.
*   **Возможность возврата:** Пользователь должен иметь возможность вернуться на предыдущий шаг для изменения своего выбора.

### 4.2. Пользовательский интерфейс и взаимодействие
*   **Понятные формулировки:** Все вопросы, названия опций, описания и подсказки должны быть сформулированы на естественном, простом языке, максимально избегая специфической regex-терминологии на начальных этапах.
*   **Введение терминологии:** При необходимости, regex-термины (например, "группа", "квантификатор") могут вводиться постепенно, с обязательными пояснениями и примерами их использования в контексте задачи пользователя.
*   **Гибкость UI-элементов:** Для каждого шага необходимо выбрать наиболее подходящий UI-элемент:
    *   Радио-кнопки (для взаимоисключающего выбора).
    *   Чекбоксы (для множественного выбора, если применимо).
    *   Выпадающие списки (для выбора из большого количества предопределенных вариантов).
    *   Поля ввода (для указания конкретного текста, чисел, пользовательских наборов символов).
    *   Крупные кликабельные карточки с иконками/краткими описаниями для основных развилок.
*   **Наглядные примеры:** Каждый значимый выбор или концепция должны сопровождаться короткими и ясными примерами того, как это работает или какому тексту это будет соответствовать.
*   **Предпросмотр (опционально, но желательно):** По возможности, отображать формирующийся фрагмент регулярного выражения или описание его действия на основе текущих выборов пользователя.

### 4.3. Функциональность и интеграция
*   **Совместимость с RegexVision:** Результатом работы Мастера должно быть:
    *   Конфигурация одного или нескольких блоков `Block` (с соответствующими `BlockType` и `BlockSettings`) для добавления в основное дерево выражений RegexVision.
    *   Готовый фрагмент регулярного выражения (который может быть добавлен как `LITERAL` блок или, по возможности, разбит на составные блоки).
*   **Покрытие сложных случаев:** Мастер должен стремиться покрывать не только простые, но и более сложные сценарии использования регулярных выражений (например, работа с группами, просмотрами, условиями), предлагая для них понятные пути построения.
*   **Масштабируемость:** Архитектура Мастера должна позволять легко добавлять новые сценарии, задачи, форматы и ветки в будущем.

## 5. Задача для аналитиков

Основная задача аналитиков — спроектировать детальную логику и структуру "Мастера регулярных выражений".

### 5.1. Исследование пользовательских сценариев
*   Определить и описать **не менее 20-30 типовых и сложных задач**, для решения которых пользователи обычно прибегают к регулярным выражениям. Примеры включают (но не ограничиваются):
    *   Поиск точного текста (с учетом/без учета регистра).
    *   Поиск email-адресов, URL, IP-адресов.
    *   Поиск дат в различных форматах (ГГГГ-ММ-ДД, ДД.ММ.ГГГГ, и т.д.).
    *   Поиск номеров телефонов (с учетом кодов стран, различных форматов).
    *   Поиск чисел: целых, дробных, отрицательных, в заданном диапазоне.
    *   Поиск слов, начинающихся/заканчивающихся определенной последовательностью.
    *   Извлечение данных из структурированного текста (логи, CSV-подобные строки): например, уровень лога, сообщение, значение параметра.
    *   Валидация форматов (например, почтовый индекс, номер кредитной карты - с осторожностью, так как для некоторых данных regex может быть не лучшим решением).
    *   Проверка сложности пароля (наличие разных типов символов, длина).
    *   Поиск текста в кавычках (одинарных, двойных, возможно, с экранированием кавычек внутри).
    *   Работа с пробельными символами (поиск, удаление лишних, замена).
    *   Поиск строк, содержащих или не содержащих определенные слова/паттерны.
    *   Извлечение данных с использованием групп захвата (например, разделить ФИО на имя, фамилию, отчество).
    *   Применение квантификаторов (ноль или более, один или более, опционально, точное количество, диапазон).
    *   Использование просмотров (lookahead, lookbehind) для проверки контекста без включения его в совпадение.
    *   Создание условных регулярных выражений.
    *   Поиск повторяющихся слов или символов.
    *   Работа с Юникодом (символы разных языков, категории символов).

### 5.2. Проектирование логики Мастера
*   Для каждой идентифицированной задачи (или группы схожих задач) **разработать логическую цепочку (дерево решений) вопросов, выборов и уточнений**, которая приведет пользователя к решению.
*   **Определить начальные 3-4 высокоуровневые "развилки"**, с которых пользователь будет начинать работу с Мастером. Эти развилки должны быть максимально интуитивными.
*   Для каждого шага в дереве решений:
    *   Сформулировать **текст вопроса или описания** на понятном языке.
    *   Предложить **варианты ответов/действий** для пользователя.
    *   Рекомендовать **наиболее подходящий UI-элемент** (радио-кнопки, чекбоксы, выпадающие списки, поля ввода, карточки).
    *   Предоставить **примеры**, иллюстрирующие выбор.
    *   Определить, как выбор пользователя на данном шаге влияет на **последующие шаги** или на **конечный результат**.
*   Продумать, как и на каком этапе знакомить пользователя с **более сложными концепциями regex** (группы, квантификаторы, просмотры, условия, жадность/ленивость квантификаторов), если его задача требует их использования. Рассмотреть возможность использования интерактивных подсказок, всплывающих объяснений или ссылок на более подробную документацию/примеры.
*   Определить, в каких случаях результатом работы ветки Мастера будет **один блок RegexVision**, в каких — **несколько взаимосвязанных блоков**, а в каких — **готовый фрагмент регулярного выражения**.
*   Предусмотреть возможность для пользователя **пропустить шаг или выбрать "не знаю"**, и как Мастер может помочь в такой ситуации (например, предложить ввести пример текста для анализа).

### 5.3. Формализация результатов
*   Подготовить **документ, описывающий полную предложенную структуру и логику Мастера**.
*   Представить **визуальную схему дерева решений** (например, в виде блок-схемы, ментальной карты или интерактивного прототипа).
*   Предоставить **полный список текстов** для всех вопросов, вариантов ответов, описаний, подсказок и примеров на каждом шаге Мастера.
*   Для каждой конечной точки в дереве решений указать, какой **конкретный блок `BlockType` и какие `BlockSettings`** должны быть сгенерированы для RegexVision, или какой готовый regex-паттерн предлагается.
*   Описать **предлагаемый механизм для будущего расширения Мастера** новыми задачами и паттернами.

## 6. Ожидаемый результат от аналитиков

Комплект документов, включающий:
1.  Детальное описание логики и структуры "Мастера регулярных выражений".
2.  Визуальные схемы (диаграммы) дерева решений/путей пользователя.
3.  Полный контент для UI Мастера (тексты вопросов, опций, примеров, подсказок).
4.  Четкое сопоставление каждого пути Мастера с генерируемыми блоками RegexVision или regex-паттернами.
5.  Рекомендации по UI/UX для каждого шага.
6.  Предложения по обработке сложных случаев и обучению пользователя.

## 7. Критерии успеха для разработанной концепции Мастера

*   **Понятность:** Пользователь, не знакомый с деталями regex, может понять логику Мастера и сделать осознанный выбор на каждом шаге.
*   **Полнота:** Предложенная структура покрывает значительное число распространенных и сложных сценариев использования regex.
*   **Эффективность:** Путь пользователя к решению его задачи через Мастер является логичным и относительно коротким.
*   **Гибкость:** Концепция допускает расширение и добавление новых сценариев без кардинальной переработки существующей логики.
*   **Соответствие целям:** Предложенное решение явно способствует достижению целей, описанных в разделе 2.
